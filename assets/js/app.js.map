{"version":3,"sources":["webpack:///webpack/bootstrap 7e5df19e432bde309f10","webpack:///./src/js/app.js","webpack:///./src/js/canvas.js","webpack:///./src/js/variables.js","webpack:///./src/js/canvas_tools.js","webpack:///./src/js/event_listeners.js","webpack:///./src/js/flickr.js"],"names":["change_canvas_size","make_image_list","thumbnails_container","document","querySelector","img_width","img_height","img_src","width","canvas_container","offsetWidth","height","offsetHeight","images","innerHTML","i","length","thumbnail","createElement","setAttribute","large","appendChild","addEventListener","style","dataset","load_image","url","img","Image","clearRect","options","points","drawImage","crossOrigin","src","search_box","search_form","tools","white_balance_slider","brightness_slider","canvas","info","draw_canvas","draw_canvas_ctx","getContext","draw","ctx","Filters","image_flipped","brightness_value","value","temp","draw_toggled","drawing","undo_stack","redo_stack","prototype","flip_image","save","translate","scale","restore","color_temp_to_RGB","r","g","b","Math","min","max","log","pow","brightness","process","a","white_balance","color","nr","ng","nb","point","beginPath","arc","x","y","size","PI","fill","closePath","func","image_data","getImageData","data","row","column","ret","putImageData","link","timestamp","Date","filename","href","toDataURL","download","add_to_history","console","undo","popped_undo_stack","pop","new_options","Object","assign","set_sliders","redo","popped_redo_stack","render","Filter","make_event_listeners","e","preventDefault","then","getMouseXY","draw_points","new_points","classList","add","remove","pageX","pageY","clientX","body","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","offsetTop","getImages","flickr_images","make_flickr_url","method","param","api_key","flickr_url","search_string","tags","split","make_flickr_api_request","Promise","resolve","reject","xhr","XMLHttpRequest","open","onload","status","response","statusText","onerror","send","page","search_flickr","json_string","JSON","parse","photos","photo","photos_array","photos_start","photos_end","push","photos_array_string","getImage","id","all","photos_array_strings","photo_sources","sizes_array","sizes","n","label","source"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7e5df19e432bde309f10","import {change_canvas_size} from './canvas';\r\nimport make_event_listeners from './event_listeners';\r\n\r\nmake_event_listeners();\r\nchange_canvas_size();\n\n\n// WEBPACK FOOTER //\n// ./src/js/app.js","import {canvas, draw_canvas, ctx, draw_canvas_ctx, tools, info} from './variables';\r\nimport Filter from './canvas_tools';\r\n\r\nconst thumbnails_container = document.querySelector(\".thumbnails_container\");\r\n\r\nexport let img_width, img_height, img_src;\r\n\r\n/**\r\n * Helper method to change the size of the canvas, as well\r\n * as the size of the draw_canvas, which is used to draw on with\r\n * a \"pen-tool\".\r\n */\r\nexport function change_canvas_size(width = canvas_container.offsetWidth, height = canvas_container.offsetHeight) {\r\n\tif(width > canvas_container.offsetWidth)\r\n\t\twidth = canvas_container.offsetWidth;\r\n\tif(height > canvas_container.offsetHeight)\r\n\t\theight = canvas_container.offsetHeight;\r\n\r\n\tcanvas.width = width;\r\n\tcanvas.height = height;\r\n\tdraw_canvas.width = width;\r\n\tdraw_canvas.height = height;\r\n}\r\n\r\n/**\r\n * Helper method to generate the image-thumnails-list\r\n * when a search string is entered\r\n * @param  {array} images The images to display\r\n */\r\nexport function make_image_list(images) {\r\n\tthumbnails_container.innerHTML = \"\";\r\n\r\n\tfor(var i = 0;i < images.length;i++) {\r\n\t\tvar thumbnail = document.createElement('img');\r\n\r\n\t\tthumbnail.setAttribute(\"src\", images[i].thumbnail);\r\n\t\tthumbnail.setAttribute(\"alt\", \"Image thumbnail\");\r\n\t\tthumbnail.setAttribute(\"class\", \"image\");\r\n\t\tthumbnail.setAttribute(\"data-large\", images[i].large);\r\n\t\tthumbnail.setAttribute(\"data-width\", images[i].width);\r\n\t\tthumbnail.setAttribute(\"data-height\", images[i].height);\r\n\r\n\t\tthumbnails_container.appendChild(thumbnail).addEventListener('click', function() {\r\n\t\t\tinfo.innerHTML = \"Loading image\";\r\n\t\t\tinfo.style = \"\";\r\n\r\n\t\t\tchange_canvas_size(this.dataset.width, this.dataset.height);\r\n\t\t\tload_image(this.dataset.large);\r\n\t\t\tcanvas.setAttribute(\"data-source\", this.dataset.large);\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * Load an image to the canvas based on a URL.\r\n * Uses img.crossOrigin to allow us to read the imageData.\r\n * Globally changes img_width and img_height.\r\n * Clears Filter.points() so whatever we drew will be gone.\r\n */\r\nfunction load_image(url) {\r\n\tvar img = new Image();\r\n\r\n\timg.addEventListener(\"load\", function() {\r\n\t\timg_width = img.width;\r\n\t\timg_height = img.height;\r\n\t\tchange_canvas_size(img_width, img_height);\r\n\t\tctx.clearRect(0, 0, img_width, img_height);\r\n\t\tdraw_canvas_ctx.clearRect(0, 0, img_width, img_height);\r\n\t\tFilter.options.points = [];\r\n\t\tctx.drawImage(img, 0, 0, img_width, img_height,\r\n\t\t\t\t\t  0, 0, canvas.width, canvas.height);\r\n\t\timg_src = url;\r\n\t\ttools.style = \"\";\r\n\t\tinfo.style = \"display:none;\";\r\n\t});\r\n\r\n\timg.crossOrigin = '';\r\n\timg.src = url;\r\n\r\n\treturn img;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/canvas.js","export const search_box = document.querySelector(\".flickr_search_box\");\r\nexport const search_form = document.querySelector(\".flickr_search_form\");\r\nexport const thumbnails_container = document.querySelector(\".thumbnails_container\");\r\nexport const tools = document.querySelector(\"#tools\");\r\nexport const canvas_container = document.querySelector(\"#canvas_container\");\r\nexport const white_balance_slider = document.querySelector(\"#white_balance_slider\");\r\nexport const brightness_slider = document.querySelector(\"#brightness_slider\");\r\nexport const canvas = document.querySelector(\".canvas\");\r\nexport const info = document.querySelector(\".info\");\r\nexport const draw_canvas = document.querySelector(\".draw_canvas\");\r\nexport const draw_canvas_ctx = document.querySelector(\".draw_canvas\").getContext('2d');\r\nexport const draw = document.querySelector(\".draw\");\r\nexport const ctx = canvas.getContext('2d');\n\n\n// WEBPACK FOOTER //\n// ./src/js/variables.js","import {img_width, img_height, img_src} from './canvas';\r\nimport {draw_canvas, draw_canvas_ctx, canvas, ctx, brightness_slider, white_balance_slider} from './variables';\r\n\r\nfunction Filters() {\r\n\tthis.options = {\r\n\t\timg: \"\",\r\n\t\timage_flipped: false,\r\n\t\tbrightness_value: brightness_slider.value,\r\n\t\ttemp: white_balance_slider.value,\r\n\t\tdraw_toggled: false,\r\n\t\tpoints: [],\r\n\t\tdrawing: false\r\n\t}\r\n\r\n\tthis.undo_stack = [];\r\n\tthis.redo_stack = [];\r\n};\r\n\r\n/**\r\n * Method to flip the canvas image\r\n */\r\nFilters.prototype.flip_image = function(img) {\r\n\tctx.save();\r\n\t\tif(this.options.image_flipped) {\r\n\t\t\tctx.translate(canvas.width, 0);\r\n\t\t\tctx.scale(-1, 1);\r\n\t\t}\r\n\r\n\t\tctx.drawImage(img, 0, 0, img_width, img_height,\r\n\t\t\t\t\t  0, 0, canvas.width, canvas.height);\r\n\tctx.restore();\r\n}\r\n\r\n/**\r\n * Method to convert a temperature to RGB for use in Filters.white_balance().\r\n * I stole this algorithm from the link below\r\n * \r\n * https://github.com/licson0729/CanvasEffects/blob/master/CanvasEffects.js\r\n *\r\n * @return {Object} Returns an object containing RGB\r\n */\r\nFilters.prototype.color_temp_to_RGB = function(temp) {\r\n\ttemp /= 100;\r\n\tvar r, g, b;\r\n\r\n\tif (temp <= 66) {\r\n\t\tr = 255;\r\n\t\tg = Math.min(Math.max(99.4708025861 * Math.log(temp) - 161.1195681661, 0), 255);\r\n\t} else {\r\n\t\tr = Math.min(Math.max(329.698727446 * Math.pow(temp - 60, -0.1332047592), 0), 255);\r\n\t\tg = Math.min(Math.max(288.1221695283 * Math.pow(temp - 60, -0.0755148492), 0), 255);\r\n\t}\r\n\r\n\tif (temp >= 66) {\r\n\t\tb = 255;\r\n\t} else if (temp <= 19) {\r\n\t\tb = 0;\r\n\t} else {\r\n\t\tb = temp - 10;\r\n\t\tb = Math.min(Math.max(138.5177312231 * Math.log(b) - 305.0447927307, 0), 255);\r\n\t}\r\n\r\n\treturn {\r\n\t\tr: r,\r\n\t\tg: g,\r\n\t\tb: b\r\n\t}\r\n}\r\n\r\n/**\r\n * Method to adjust brightness. Stolen from: \r\n * https://github.com/licson0729/CanvasEffects/blob/master/CanvasEffects.js\r\n *\r\n * Because algorithms isn't my forte.\r\n */\r\nFilters.prototype.brightness = function() {\t\r\n\tvar brightness = this.options.brightness_value / 100;\r\n\r\n\treturn this.process(function(r, g, b, a) {\r\n\t\treturn [r * brightness, g * brightness, b * brightness, a];\r\n\t});\r\n}\r\n\r\n/**\r\n * Method to adjust white_balance. Stolen from: \r\n * https://github.com/licson0729/CanvasEffects/blob/master/CanvasEffects.js\r\n *\r\n * Because algorithms isn't my forte.\r\n */\r\nFilters.prototype.white_balance = function() {\r\n\tvar color = this.color_temp_to_RGB(this.options.temp);\r\n\treturn this.process(function(r, g, b, a) {\r\n\t\tvar nr = r * (255 / color.r);\r\n\t\tvar ng = g * (255 / color.g);\r\n\t\tvar nb = b * (255 / color.b);\r\n\t\treturn [nr, ng, nb, a];\r\n\t});\r\n}\r\n\r\n/**\r\n * Method to draw on a second canvas layer (not the one hosting the image)\r\n * Decides where to draw based on the values of this.options.points\r\n */\r\nFilters.prototype.draw = function() {\r\n\tdraw_canvas_ctx.clearRect(0, 0, img_width, img_height);\r\n\r\n\tfor(var i = 0;i < this.options.points.length;i++) {\r\n\t\tvar point = this.options.points[i];\r\n\t\tdraw_canvas_ctx.beginPath();\r\n\t\t\tdraw_canvas_ctx.arc(point.x, point.y, point.size, 0, 2 * Math.PI, );\r\n\t\t\tdraw_canvas_ctx.fill();\r\n\t\tdraw_canvas_ctx.closePath();\r\n\t}\r\n}\r\n\r\n/**\r\n * Method to loop through all the pixels on the canvas image and apply\r\n * a function to them. Stolen from:\r\n *\r\n * https://github.com/licson0729/CanvasEffects/blob/master/CanvasEffects.js\r\n * \r\n * I know I could have written this myself, but I found it, and it\r\n * was being used by the other algorithms that I found there,\r\n * so I decided to use it and make some slight modifications to it.\r\n */\r\nFilters.prototype.process = function(func) {\r\n\t//Get the pixel values\r\n\tvar image_data = ctx.getImageData(0, 0, img_width, img_height);\r\n\tvar data = image_data.data;\r\n\r\n\t//Loop through the pixels\r\n\tfor (var row = 0; row < image_data.height; row++) {\r\n\t\tfor (var column = 0; column < image_data.width; column++) {\r\n\t\t\tvar i = (column * image_data.height + row) * 4;\r\n\t\t\tvar r = data[i],\r\n\t\t\t\tg = data[i + 1],\r\n\t\t\t\tb = data[i + 2],\r\n\t\t\t\ta = data[i + 3];\r\n\r\n\t\t\tvar ret = func(r, g, b, a, row, column);\r\n\t\t\timage_data.data[i] = ret[0];\r\n\t\t\timage_data.data[i + 1] = ret[1];\r\n\t\t\timage_data.data[i + 2] = ret[2];\r\n\t\t\timage_data.data[i + 3] = ret[3];\r\n\t\t}\r\n\t}\r\n\r\n\t//Put the image back to the canvas\r\n\tctx.putImageData(image_data, 0, 0);\r\n}\r\n\r\n/**\r\n * Method to download the image\r\n */\r\nFilters.prototype.save = function(link) {\r\n\tvar timestamp = + new Date();\r\n\tvar filename = \"flickr_editor_\" + timestamp + \".png\";\r\n\r\n\tctx.drawImage(draw_canvas, 0, 0);\r\n\tlink.href = canvas.toDataURL();\r\n\tlink.download = filename;\r\n}\r\n\r\n/**\r\n * Method to add previous options state to undo_stack\r\n * Resets the redo_stack to be empty.\r\n */\r\nFilters.prototype.add_to_history = function() {\r\n\tthis.redo_stack = [];\r\n\tconsole.log(this.options.image_flipped);\r\n\tthis.undo_stack = [...this.undo_stack, {\r\n\t\timg: this.options.img,\r\n\t\timage_flipped: this.options.image_flipped,\r\n\t\tbrightness_value: this.options.brightness_value,\r\n\t\ttemp: this.options.temp,\r\n\t\tdraw_toggled: this.options.draw_toggled,\r\n\t\tpoints: this.options.points\r\n\t}];\r\n}\r\n\r\n/**\r\n * Method to undo. Adds current options state to redo_stack\r\n * Changes current options state to be what's last in the undo_stack\r\n */\r\nFilters.prototype.undo = function () {\r\n\tif(this.undo_stack.length) {\r\n\t\tthis.redo_stack = [...this.redo_stack, this.options];\r\n\r\n\t\tvar options = this.options;\r\n\t\tvar popped_undo_stack = this.undo_stack.pop();\r\n\r\n\t\tvar new_options = Object.assign({}, options, popped_undo_stack);\r\n\t\tthis.options = new_options;\r\n\t}\r\n\r\n\tthis.set_sliders();\r\n}\r\n\r\n/**\r\n * Method to redo. Adds current options state to undo_stack\r\n * Changes current options state to be what's last in the redo_stack\r\n */\r\nFilters.prototype.redo = function () {\r\n\tif(this.redo_stack.length) {\t\r\n\t\tthis.undo_stack = [...this.undo_stack, this.options];\r\n\r\n\t\tvar options = this.options;\r\n\t\tvar popped_redo_stack = this.redo_stack.pop();\r\n\r\n\t\tvar new_options = Object.assign({}, options, popped_redo_stack);\r\n\t\tthis.options = new_options;\r\n\t}\r\n\t\r\n\tthis.set_sliders();\r\n}\r\n\r\n/**\r\n * Method to set the sliders to the values given when undoing/ redoing\r\n */\r\nFilters.prototype.set_sliders = function() {\r\n\twhite_balance_slider.value = this.options.temp;\r\n\tbrightness_slider.value = this.options.brightness_value;\r\n}\r\n\r\n/**\r\n * Method to render a new image with all filter settings\r\n */\r\nFilters.prototype.render = function() {\r\n\tvar img = new Image();\r\n\tthis.options.img = img;\r\n\r\n\timg.addEventListener('load', () => {\r\n\t\tctx.clearRect(0, 0, img_width, img_height);\r\n\t\tthis.flip_image(img);\r\n\t\tthis.brightness();\r\n\t\tthis.white_balance();\r\n\t\tthis.draw();\r\n\t});\r\n\r\n\timg.crossOrigin = '';\r\n\timg.src = img_src;\r\n}\r\n\r\n/**\r\n * Export the Filters object as Filter for use in other files\r\n */\r\n\r\nconst Filter = new Filters()\r\nexport default Filter;\n\n\n// WEBPACK FOOTER //\n// ./src/js/canvas_tools.js","import {search_form, canvas, white_balance_slider, draw, draw_canvas} from './variables';\r\nimport {getImages} from './flickr';\r\nimport {make_image_list} from './canvas';\r\n\r\nimport Filter from './canvas_tools';\r\n\r\nexport default function make_event_listeners() {\r\n\t/**\r\n\t * Event-listener that listens to the submission of the search form\r\n\t */\r\n\tsearch_form.addEventListener('submit', function(e) {\r\n\t\te.preventDefault();\r\n\t\tgetImages(0).then((images) => {\r\n\t\t\tmake_image_list(images);\r\n\t\t});\r\n\t}, false);\r\n\r\n\t/**\r\n\t * Toggle the Filter.options.image_flipped when \"flip image\" is clicked\r\n\t */\r\n\tdocument.querySelector('.flip').addEventListener('click', function() {\r\n\t\tFilter.add_to_history();\r\n\t\tFilter.options.image_flipped = !Filter.options.image_flipped;\r\n\t\tFilter.render();\r\n\t});\r\n\r\n\t/**\r\n\t * Event-listener for undo-button\r\n\t */\r\n\tdocument.querySelector('.undo').addEventListener('click', function() {\r\n\t\tFilter.undo();\r\n\t\tFilter.render();\r\n\t});\r\n\r\n\t/**\r\n\t * Event-listener for redo-button\r\n\t */\r\n\tdocument.querySelector('.redo').addEventListener('click', function() {\r\n\t\tFilter.redo();\r\n\t\tFilter.render();\r\n\t});\r\n\r\n\t/**\r\n\t * Event-listener for save-button\r\n\t */\r\n\tdocument.querySelector('.save').addEventListener('click', function() {\r\n\t\tFilter.save(this);\r\n\t\tFilter.render();\r\n\t});\r\n\r\n\r\n\t/**\r\n\t * When the user presses the mouse-button while on the canvas,\r\n\t * let the script know we intend to draw\r\n\t */\r\n\tdraw_canvas.addEventListener('mousedown', function() {\r\n\t\tFilter.add_to_history();\r\n\t\tFilter.options.drawing = true;\r\n\t});\r\n\r\n\t/**\r\n\t * When the user is no longer pressing the mouse, we\r\n\t * set the drawing option to false\r\n\t */\r\n\tdraw_canvas.addEventListener('mouseup', function() {\r\n\t\tFilter.options.drawing = false;\r\n\t});\r\n\r\n\t/**\r\n\t * If the drawing-option is true, and we have activated the\r\n\t * draw button in the tools panel, register mouse position as\r\n\t * points\r\n\t */\r\n\tdraw_canvas.addEventListener('mousemove', function(e) {\r\n\t\tif(Filter.options.drawing && Filter.options.draw_toggled) {\r\n\t\t\tvar {x, y} = getMouseXY(e);\r\n\t\t\tvar size = 10;\r\n\r\n\t\t\tconst draw_points = Filter.options.points;\r\n\t\t\tconst new_points = [...draw_points, { x, y, size }];\r\n\t\t\tFilter.options.points = new_points;\r\n\t\t\tFilter.render();\r\n\t\t}\r\n\t});\r\n\r\n\t/**\r\n\t * Toggle draw to ensure the application that you would like to draw\r\n\t * Because just relying on mouse down and mouse up would not be such a good idea\r\n\t *\r\n\t * Make it look cool with a style when it's toggled\r\n\t */\r\n\tdraw.addEventListener('click', function() {\r\n\t\tFilter.options.draw_toggled = !Filter.options.draw_toggled;\r\n\r\n\t\tif(Filter.options.draw_toggled) {\r\n\t\t\tthis.classList.add('active');\r\n\t\t} else {\r\n\t\t\tthis.classList.remove('active');\r\n\t\t}\r\n\r\n\t\tFilter.render();\r\n\t});\r\n\r\n\t/**\r\n\t * Set the temperature for white balance, based on the value\r\n\t * of the White Balance slider. Duhh\r\n\t */\r\n\twhite_balance_slider.addEventListener('change', function() {\r\n\t\tFilter.add_to_history();\r\n\t\tFilter.options.temp = this.value;\r\n\t\tFilter.render();\r\n\t});\r\n\r\n\t/**\r\n\t * Set the brightness the image, based on the value\r\n\t * of the brightness slider.\r\n\t */\r\n\tbrightness_slider.addEventListener('change', function() {\r\n\t\tFilter.add_to_history();\r\n\t\tFilter.options.brightness_value = this.value;\r\n\t\tFilter.render();\r\n\t})\r\n}\r\n\r\n/**\r\n * Returns an object with the x and y positions\r\n * of a mouse event\r\n */\r\nfunction getMouseXY(e) {\r\n\tvar x;\r\n\tvar y;\r\n\r\n\tif (e.pageX || e.pageY) { \r\n\t\tx = e.pageX;\r\n\t\ty = e.pageY;\r\n\t}\r\n\telse { \r\n\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft; \r\n\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop; \r\n\t}\r\n\r\n\tx -= canvas.offsetLeft;\r\n\ty -= canvas.offsetTop;\r\n\r\n\treturn({x, y});\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/event_listeners.js","import {search_box, search_form, info} from './variables';\r\n\r\nlet flickr_images = [];\r\n\r\n/**\r\n * Method to make a flickr_url\r\n * @param  {string} method What method to call from the flickr.api\r\n * @param  param  Extra parameters for the URL\r\n * @return {string}        API URL\r\n */\r\nfunction make_flickr_url(method, param) {\r\n\tconst api_key = \"def6981d1e064bf25f16a7542d848ace\";\r\n\tvar flickr_url = \"https://api.flickr.com/services/rest/?nojsoncallback=1&format=json&method=\"+method+\"&api_key=\"+api_key;\r\n\r\n\t\r\n\t // If we are doing a search on photos\r\n\tif(method == 'flickr.photos.search') {\r\n\t\t// Add a tags parameter to the URL\r\n\t\tflickr_url += \"&tags=\";\r\n\r\n\t\t// Get the tags from the search box\r\n\t\t// and split it based on comma\r\n\t\tvar search_string = search_box.value;\r\n\t\tvar tags = search_string.split(',');\r\n\r\n\t\t// Add them to the URL, separated by comma\r\n\t\tfor(var i = 0;i < tags.length;i++) {\r\n\t\t\tif(i !== 0) {\r\n\t\t\t\tflickr_url += \",\";\r\n\t\t\t}\r\n\r\n\t\t\tflickr_url += tags[i];\r\n\t\t}\r\n\t}\r\n\tif(method == 'flickr.photos.getSizes') {\r\n\t\tflickr_url += \"&photo_id=\" + param;\r\n\t}\r\n\r\n\treturn flickr_url;\r\n}\r\n\r\n/**\r\n * Make a flickr API request\r\n * @param  {string} method What method to call from the flickr.api\r\n * @param  param  Extra parameters for the URL\r\n * @return {Promise}        Returns a Promise containing\r\n *                          whatever the XMLHttpRequest returned\r\n */\r\nfunction make_flickr_api_request(method, param) {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\txhr.open('GET', make_flickr_url(method, param));\r\n\r\n\t\txhr.onload = function() {\r\n\t\t\tif(this.status >= 200 && this.status < 300) {\r\n\t\t\t\tresolve(xhr.response);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treject({status: this.status, statusText: xhr.statusText});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\txhr.onerror = function() {\r\n\t\t\treject({status: this.status, statusText: xhr.statusText});\r\n\t\t};\r\n\r\n\t\txhr.send();\r\n\t});\r\n}\r\n\r\n/**\r\n * Gets the images based on the return value\r\n * of make_flickr_api_request. There's no error handling.\r\n * That's mainly due to lack of time. Sorry.\r\n *\r\n * The page parameter is not being dynamically assigned\r\n * from functions calling this function.\r\n * This is mainly due to lack of time as well.\r\n */\r\nexport function getImages(page) {\r\n\t// Here we're assiging an entire promise to the variable images.\r\n\t// At the end of this promise-chain, an array\r\n\t// containing object with the image URLs for thumbnail (a bit bigger)\r\n\t// and original size, as well as the image width and height.\r\n\t// \r\n\t// First search flickr using our helper method\r\n\tvar images = search_flickr().then((json_string) => {\r\n\t\t// Then parse the return value\r\n\t\treturn JSON.parse(json_string);\r\n\t}).then(images => {\r\n\t\t// Then return the array containing the photos\r\n\t\treturn images.photos.photo;\r\n\t}).then(photos => {\r\n\t\t// Then pick 5 photos starting from the first\r\n\t\t// photo on the page we're on (based on page arg)\r\n\t\tvar photos_array = [];\r\n\r\n\t\tvar photos_start = page * 5;\r\n\t\tvar photos_end = page * 5 + 5;\r\n\r\n\t\tif(photos_end > photos.length)\r\n\t\t\tphotos_end = photos.length;\r\n\r\n\t\tfor(var i = photos_start;i < photos_end;i++) {\r\n\t\t\tphotos_array.push(photos[i]);\r\n\t\t}\r\n\r\n\t\treturn photos_array;\r\n\t}).then(photos_array => {\r\n\t\t// Then get the image URL's for the thumbnail and canvas-image\r\n\t\t// based on the ID from photos saved in the previous step\r\n\t\tvar photos_array_string = [];\r\n\r\n\t\tfor(var i = 0;i < photos_array.length;i++) {\r\n\t\t\tphotos_array_string.push(getImage(photos_array[i].id));\r\n\t\t}\r\n\r\n\t\t// Since getImage returns a Promise, we resolve\r\n\t\t// all the promises in photos_array_string before passing\r\n\t\t// it on to the next step\r\n\t\treturn Promise.all(photos_array_string);\r\n\t}).then(photos_array_strings => {\r\n\t\t// And here we parse all the strings in the array\r\n\t\tvar photos_array = [];\r\n\r\n\t\tfor(var i = 0;i < photos_array_strings.length;i++) {\r\n\t\t\tphotos_array.push(JSON.parse(photos_array_strings[i]));\r\n\t\t}\r\n\r\n\t\treturn photos_array;\r\n\t}).then(photos_array => {\r\n\t\t// And here we save a thumbnail url, large image url, image width and height\r\n\t\t// to a photo_sources array, and then we pass it as a return value.\r\n\t\tvar photo_sources = [];\r\n\r\n\t\tfor(var i = 0;i < photos_array.length;i++) {\r\n\t\t\t// We chose to actually get all sizes rather than the image_context,\r\n\t\t\t// so we now have access to multiple image sizes.\r\n\t\t\tvar sizes_array = photos_array[i].sizes.size;\r\n\r\n\t\t\tvar thumbnail;\r\n\t\t\tvar large;\r\n\t\t\tvar width;\r\n\t\t\tvar height;\r\n\r\n\t\t\t// We loop through all the sizes, until we find\r\n\t\t\t// the small and original one.\r\n\t\t\t// \r\n\t\t\t// We should handle an error here in case an image\r\n\t\t\t// doesn't exist, but yeah.. I didn't, because I wanted to\r\n\t\t\t// prioritize other things. But some images don't\r\n\t\t\t// exist as small/ original (I think, because sometimes images\r\n\t\t\t// don't show up)\r\n\t\t\tfor(var n = 0; n < sizes_array.length;n++) {\r\n\t\t\t\tif(sizes_array[n].label == \"Small\") \r\n\t\t\t\t\tthumbnail = sizes_array[n].source;\r\n\t\t\t\t\r\n\t\t\t\tif(sizes_array[n].label == \"Large\") {\r\n\t\t\t\t\tlarge = sizes_array[n].source;\r\n\t\t\t\t\twidth = sizes_array[n].width;\r\n\t\t\t\t\theight = sizes_array[n].height;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!large) {\r\n\t\t\t\tinfo.innerHTML = \"This image doesn't seem to exist in the size this app uses\";\r\n\t\t\t\tinfo.style = \"\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tinfo.innerHTML = \"\";\r\n\t\t\t\tinfo.style = \"display:none;\";\r\n\t\t\t}\r\n\t\t\t// Add image object to the images array\r\n\t\t\tphoto_sources.push({thumbnail, large, width, height});\r\n\t\t}\r\n\r\n\t\tinfo.style = \"display:none\";\r\n\t\treturn photo_sources;\r\n\t});\r\n\r\n\t// Return the images array we made with the promise-chain above\r\n\treturn images;\r\n}\r\n\r\n/**\r\n * Just a short method for making a search API request\r\n * to flickr\r\n */\r\nfunction search_flickr(tags) {\r\n\tinfo.innerHTML = \"Loading images\";\r\n\tinfo.style = \"\";\r\n\r\n\treturn make_flickr_api_request(\"flickr.photos.search\", tags);\r\n}\r\n\r\n/**\r\n * Just a short method for making a getImage API request\r\n * to flickr\r\n */\r\nfunction getImage(id) {\r\n\treturn make_flickr_api_request(\"flickr.photos.getSizes\", id);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/flickr.js"],"sourceRoot":""}